\section{VALIDAÇÃO COM DATASETS PÚBLICOS}
\label{sec:validacao_datasets}

Como visto ao longo deste trabalho, o problema abordado envolve diversos tipos de restrições, tornando trabalhosa a troca de informações entre pesquisadores. Para solucionar esse problema, \citeonline{xhstt} sugeriu o XHSTT, um formato padronizado de arquivo XML para a representação de instâncias e soluções do \textit{High School Timetabling Problem}.

O projeto HSTT da Universidade de \citeonline{Twente} hospeda publicamente diversas instâncias do problema no formato XHSTT. Destas, selecionaram-se três instâncias brasileiras para complementar a validação do sistema desenvolvido, utilizando dados externos.

Para a validação e comparação de soluções utilizando o formato XHSTT, existe um \textit{software} conhecido como \textit{HSEval High School Timetable Evaluator}, parte de um projeto com objetivo de analisar instâncias e soluções para o \textit{High School Timetabling Problem} \cite{HSEval}.

Para cada uma das instâncias de validação presentes nas próximas subseções, foi utilizado o otimizador desenvolvido ao longo deste trabalho para produzir soluções, aplicando um limite de tempo de otimização de 5 minutos para cada instância. As melhores soluções produzidas foram então exportadas e validadas utilizando o HSeval, gerando relatórios de comparação das soluções com outras soluções presentes na literatura.

\subsection{Instância 1}

A primeira instância de teste, identificada como ``BrazilInstance1'', é composta por três turmas, 8 professores, cujas aulas devem ser alocadas em uma grade horária de 5 dias por semana, com 5 aulas por dia. As quantidade de aulas por professor em cada turma podem ser conferidas na tabela \ref{tab:config_aulas_br1}.

\input{./dados/tabelas/quantidadesAulasBrazilInstance1}

Os requisitos associados à instância são:
\begin{enumerate}
	\item Requisito 1 (obrigatório) : Não devem existir conflitos;
	\item Requisito 2 (não obirgatório) : Não devem existir janelas;
	\item Requisito 3 (obrigatório) : Cada professor tem um dia da semana específico em que suas aulas não podem ser agendadas;
	\item Requisito 4 (não obrigatório) : Os professores T1, T2, T3, T4. T5, T7 e T8 não devem ser alocados em mais de 2 dias da semana;
	\item Requisito 5 (não obrigatório) : O professor T6 não deve ser alocado em mais de 3 dias da semana;
	\item Requisito 6 (não obrigatório) : Requisitos de quantidades mínimas de aulas duplas, que devido à sua extensão e não obrigatoriedade, não será explicitado.
\end{enumerate}

Sobre o requisito 3, a relação dos dias da semana bloqueados para cada professor pode ser conferida na lista abaixo:
\begin{enumerate}
	\item Segunda-feira: T5;
	\item Terça-feira: T4 e T7;
	\item Quarta-feira: T1 e T6;
	\item Quinta-feira: T3 e T8;
	\item Sexta-feira: T2.
\end{enumerate}

A melhor solução produzida pelo otimizador pode ser vista na figura \ref{fig:brazilinstance1_solucao}, e a correspondente validação e pontuação na figura \ref{fig:hseval_brazilinstance1}.

\begin{figure}[h]
	\centering
	\caption{Grade exportada - Solução para a instância BrazilInstance1}
	\includegraphics[width=0.5\textwidth]{./dados/figuras/brazilinstance1}
	\fonte{Autoria própria}
	\label{fig:brazilinstance1_solucao}
\end{figure}

\begin{figure}[h]
	\centering
	\caption{Relatório produzido pel HSEval para a solução apresentada}
	\includegraphics[width=1\textwidth]{./dados/figuras/hseval_brazilinstance1}
	\fonte{Relatório produzido no HSEval - \citeonline{HSEval}}
	\label{fig:hseval_brazilinstance1}
\end{figure}

\begin{figure}[h]
	\centering
	\caption{Relatório HSeval comparativo das soluções para a BrazilInstance1}
	\includegraphics[width=1\textwidth]{./dados/figuras/benchmark_instance1}
	\fonte{Relatório produzido no HSEval - \citeonline{HSEval}}
	\label{fig:rankin_brazilinstance1}
\end{figure}

\clearpage
\subsection{Instância 2}

A segunda instância de teste, identificada como ``BrazilInstance5'', é composta por 13 turmas, 31 professores, cujas aulas devem ser alocadas em uma grade horária de 5 dias por semana, com 5 aulas por dia. As quantidade de aulas por professor em cada turma podem ser conferidas na tabela quadro \ref{tab:config_aulas_br5}.

\input{./dados/tabelas/quantidadesAulasBrazilInstance5}

\newpage
Os requisitos associados à instância são:
\begin{enumerate}
	\item Requisito 1 (obrigatório) : Não devem existir conflitos;
	\item Requisito 2 (não obrigatório) : Não devem existir janelas;
	\item Requisito 3 (não obrigatório) : Cada professor tem um l trabalhados por semana, conforme o quadro \ref{qua:limites_dias_trabalhados_brazilinstance5};
	\item Requisito 4 (não obrigatório) : Requisitos de quantidades mínimas de aulas duplas, que não serão aqui  devido a sua grande quantidade.
\end{enumerate}

\begin{quadro}[h]
	\centering
	\caption{Limite de dias trabalhados por professor - BrazilInstance5.\label{qua:limites_dias_trabalhados_brazilinstance5}}
	\begin{tabular}{|p{2cm}|p{4cm}|}
		\hline
		\textbf{Professor} & \textbf{Limite em dias} \\
		\hline
		T1 & 4 \\
		\hline
		T2 & 5 \\
		\hline
		T3 & 2 \\
		\hline
		T4 & 2 \\
		\hline
		T5 & 1 \\
		\hline
		T6 & 3 \\
		\hline
		T7 & 4 \\
		\hline
		T8 & 5 \\
		\hline
		T9 & 2 \\
		\hline
		T10 & 5 \\
		\hline
		T11 & 2 \\
		\hline
		T12 & 4 \\
		\hline
		T13 & 2 \\
		\hline
		T14 & 2 \\
		\hline
		T15 & 2 \\
		\hline
		T16 & 1 \\
		\hline
		T17 & 2 \\
		\hline
		T18 & 4 \\
		\hline
		T19 & 4 \\
		\hline
		T20 & 1 \\
		\hline
		T21 & 2 \\
		\hline
		T22 & 2 \\
		\hline
		T23 & 3 \\
		\hline
		T24 & 2 \\
		\hline
		T25 & 4 \\
		\hline
		T26 & 2 \\
		\hline
		T27 & 2 \\
		\hline
		T28 & 4 \\
		\hline
		T29 & 4 \\
		\hline
		T30 & 1 \\
		\hline
		T31 & 1 \\
		\hline
	\end{tabular}
	\fonte{Dataset hospedado pela Universidade de \citeonline{Twente}}
\end{quadro}

A melhor solução produzida pelo otimizador pode ser vista na figura \ref{fig:brazilinstance5_solucao}, e a correspondente validação e pontuação na figura \ref{fig:hseval_brazilinstance5}.

\begin{figure}[h]
	\centering
	\caption{Grade exportada - Solução para a instância BrazilInstance5}
	\includegraphics[width=1\textwidth]{./dados/figuras/brazilinstance5}
	\fonte{Autoria própria}
	\label{fig:brazilinstance5_solucao}
\end{figure}

\begin{figure}[h]
	\centering
	\caption{Relatório produzido pelo HSEval para a solução apresentada}
	\includegraphics[width=1\textwidth]{./dados/figuras/hseval_brazilinstance5}
	\fonte{Relatório produzido no HSEval - \citeonline{HSEval}}
	\label{fig:hseval_brazilinstance5}
\end{figure}

\begin{figure}[h]
	\centering
	\caption{Relatório HSeval comparativo das soluções para a BrazilInstance5}
	\includegraphics[width=1\textwidth]{./dados/figuras/benchmark_instance5}
	\fonte{Relatório produzido no HSEval - \citeonline{HSEval}}
	\label{fig:rankin_brazilinstance5}
\end{figure}

\clearpage
\subsection{Instância 3}

A terceira instância de teste, identificada como ``BrazilInstance7'', é composta por 20 turmas, 33 professores, cujas aulas devem ser alocadas em uma grade horária de 5 dias por semana, com 5 aulas por dia. As quantidade de aulas por professor em cada turma podem ser conferidas nas tabelas \ref{tab:config_aulas_br7} e \ref{tab:config_aulas_br7_2}.

\input{./dados/tabelas/quantidadesAulasBrazilInstance7}

\newpage
Os requisitos associados à instância são:
\begin{enumerate}
	\item Requisito 1 (obrigatório) : Não devem existir conflitos;
	\item Requisito 2 (não obrigatório) : Não devem existir janelas;
	\item Requisito 3 (não obrigatório) : Cada professor tem um limite de dias trabalhados por semana, conforme o quadro \ref{qua:limites_dias_trabalhados_brazilinstance7};
	\item Requisito 4 (não obrigatório) : Requisitos de quantidades mínimas de aulas duplas, que não serão aqui  devido a sua grande quantidade.
\end{enumerate}

\begin{quadro}[h]
	\centering
	\caption{Limite de dias trabalhados por professor - BrazilInstance7.\label{qua:limites_dias_trabalhados_brazilinstance7}}
	\begin{tabular}{|p{2cm}|p{4cm}|}
		\hline
		\textbf{Professor} & \textbf{Limite em dias} \\
		\hline
		T1 & 4 \\
		\hline
		T2 & 4 \\
		\hline
		T3 & 4 \\
		\hline
		T4 & 4 \\
		\hline
		T5 & 4 \\
		\hline
		T6 & 4 \\
		\hline
		T7 & 4 \\
		\hline
		T8 & 4 \\
		\hline
		T9 & 4 \\
		\hline
		T10 & 3 \\
		\hline
		T11 & 3 \\
		\hline
		T12 & 3 \\
		\hline
		T13 & 3 \\
		\hline
		T14 & 4 \\
		\hline
		T15 & 4 \\
		\hline
		T16 & 4 \\
		\hline
		T17 & 4 \\
		\hline
		T18 & 4 \\
		\hline
		T19 & 3 \\
		\hline
		T20 & 3 \\
		\hline
		T21 & 3 \\
		\hline
		T22 & 3 \\
		\hline
		T23 & 3 \\
		\hline
		T24 & 3 \\
		\hline
		T25 & 3 \\
		\hline
		T26 & 3 \\
		\hline
		T27 & 3 \\
		\hline
		T28 & 3 \\
		\hline
		T29 & 3 \\
		\hline
		T30 & 3 \\
		\hline
		T31 & 3 \\
		\hline
		T32 & 3 \\
		\hline
		T33 & 1 \\
		\hline
	\end{tabular}
	\fonte{Dataset hospedado pela Universidade de \citeonline{Twente}}
\end{quadro}

\newpage
A melhor solução produzida pelo otimizador pode ser vista nas figuras \ref{fig:brazilinstance7_solucao} e \ref{fig:brazilinstance7_solucao_2}, e a correspondente validação e pontuação na figura \ref{fig:hseval_brazilinstance5}.

Vale ressaltar que todas as salas da instância pertecem ao mesmo turno, ou seja, apesar de as turmas terem sido separadas em duas figuras para melhor legibilidade, ainda poderiam ocorrer conflitos entre as turmas S1 e S20, por exemplo. Outra consideração importante é que para melhor legibilidade, na figura \ref{fig:hseval_brazilinstance7} omitiu-se a parte do relatório relacionada às quantidades mínimas de aulas duplas, considerando que a solução gerada tem 48 violações dessa regra. Contudo, estas violações ainda são consideradas no cálculo, como pode ser na primeira linha da tabela ``Summary'' na mesma figura.

\begin{figure}[h]
	\centering
	\caption{Solução para a instância BrazilInstance7 - Turmas S1 a S10}
	\includegraphics[width=1\textwidth]{./dados/figuras/brazilinstance7}
	\fonte{Autoria própria}
	\label{fig:brazilinstance7_solucao}
\end{figure}

\begin{figure}[h]
	\centering
	\caption{Solução para a instância BrazilInstance7 - Turmas S11 a S20}
	\includegraphics[width=1\textwidth]{./dados/figuras/brazilinstance7_2}
	\fonte{Autoria própria}
	\label{fig:brazilinstance7_solucao_2}
\end{figure}

\begin{figure}[h]
	\centering
	\caption{Relatório produzido pelo HSEval para a solução apresentada}
	\includegraphics[width=1\textwidth]{./dados/figuras/hseval_brazilinstance7}
	\fonte{Relatório produzido no HSEval - \citeonline{HSEval}}
	\label{fig:hseval_brazilinstance7}
\end{figure}

\begin{figure}[h]
	\centering
	\caption{Relatório HSeval comparativo das soluções para a BrazilInstance7}
	\includegraphics[width=1\textwidth]{./dados/figuras/benchmark_instance7}
	\fonte{Relatório produzido no HSEval - \citeonline{HSEval}}
	\label{fig:rankin_brazilinstance7}
\end{figure}